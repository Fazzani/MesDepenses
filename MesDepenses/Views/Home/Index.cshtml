@{
    ViewBag.Title = "Home Page";
}
@section scripts {
    <script>
        var urlGetData = '@Url.Action("ReadData", "Home")';
        var ViewModel = function () {
            var self = this;

            self.items = ko.observableArray();

            self.compteLength = ko.computed(function () {
                return self.items().length;
            }, this);

            self.load = function () {
                $.getJSON(urlGetData, function (data) {
                    //console.log(JSON.parse(data));
                    ko.mapping.fromJS(JSON.parse(data), {}, self.items);
                });
            };
            self.load();
        };
        $(function () {
            ko.applyBindings(new ViewModel());

        });
    </script>

    @*<script src="~/Scripts/Custom/ViewModel/IndexVM.js"></script>*@

}

@section featured {
    <section class="featured">
        <div class="content-wrapper">
            <hgroup class="title">
                <h1>@ViewBag.Title.</h1>
                <h2>@ViewBag.Message</h2>
            </hgroup>
            <p>
            </p>
        </div>
    </section>
}
<h3>Mes Opérations</h3>
<table class="table table-striped table-hover table-condensed">
    <thead>
        <tr>
            <th>Libellé
            </th>
            <th>Date
            </th>
            <th>Référence
            </th>
            <th>Montant
            </th>
        </tr>
    </thead>
    <tbody data-bind="foreach: items">
        <tr data-bind="css: { 'warning': Montant() < 0, 'success': Montant() > 0, 'danger': Montant() <= -1000 }">
            <td data-bind="text: Libelle"></td>
            <td data-bind="text: Datevaleur"></td>
            <td data-bind="text: Reference"></td>
            <td data-bind="text: Montant"></td>
        </tr>
    </tbody>
</table>
